{"version":3,"sources":["MyObject.ts","hexagon.ts","index.ts"],"names":[],"mappings":"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","file":"src.77de5100.map","sourceRoot":"../src","sourcesContent":["export interface MyObject {\n    vertices: number[][],\n    indices: number[][]\n}\n\n\nexport interface Buffers {\n    vbo: WebGLRenderbuffer,\n    ibo: WebGLRenderbuffer\n}\n\n\nexport function getBuffers(gl: WebGLRenderingContext, obj: MyObject): Buffers | null {\n    const _vbo = gl.createBuffer()\n    const _ibo = gl.createBuffer()\n    if((!_vbo) || (!_ibo)) {\n        return null\n    }\n\n    const buff: Buffers = {\n        vbo: _vbo as WebGLBuffer,\n        ibo: _ibo as WebGLBuffer\n    }\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, buff.vbo)\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(obj.vertices.flat()), gl.STATIC_DRAW)\n    gl.bindBuffer(gl.ARRAY_BUFFER, null)\n\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buff.ibo)\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Int16Array(obj.indices.flat()), gl.STATIC_DRAW)\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null)\n\n    return buff\n}","import {MyObject} from \"./MyObject\"\n\n\nexport function getHexagon(length: number): MyObject {\n    return {\n        vertices: getVertices(length),\n        indices: getIndicese(length)\n    }\n}\n\n\nfunction getVertices(length: number): number[][] {\n    const th = 1.0 / length\n    const tw2 = th / Math.sqrt(3)\n    const tw = tw2 * 2\n\n    const arr = []\n    for(let i = -length; i <= length; i++) {\n        const absi = Math.abs(i)\n        \n        const y = th * i\n        let x = tw2 * absi - 2.0 / Math.sqrt(3)\n        const n = length * 2 + 1 - absi\n\n        for(let j = 0; j < n; j++) {\n            arr.push([x, y])\n            x += tw\n        }\n    }\n\n    return arr\n}\n\n\nfunction triangles(top: number, bottom: number, n: number): number[][] {\n    let t = top\n    let b = bottom\n    const arr = []\n\n    for(var i = 0; i < n; i++) {\n        arr.push([t, b, b + 1])\n        t++\n        b++\n    }\n\n    return arr\n}\n\n\nfunction getIndicese(length: number): number[][] {\n    let index = 0\n    let num_triangles = length\n    let arr: number[][] = []\n\n    for(let i = 0; i < length; i++) {\n        const next_index = index + length + i + 1\n        arr = arr.concat(triangles(next_index + 1, index, num_triangles++))\n        arr = arr.concat(triangles(index, next_index, num_triangles))\n        index = next_index\n    }\n\n    for(let i = 0; i < length; i++) {\n        const next_index = index + 2 * length - i + 1\n        arr = arr.concat(triangles(next_index, index, num_triangles--))\n        arr = arr.concat(triangles(index + 1, next_index, num_triangles))\n        index = next_index\n    }\n\n    return arr\n}","import {getBuffers, Buffers} from \"./MyObject\"\nimport {getHexagon} from \"./hexagon\"\n\n\nvar gl: WebGLRenderingContext\n\nwindow.onload = () => {\n    const c = document.getElementById(\"webgl\") as HTMLCanvasElement\n\n    const width = c.width\n    const height = c.height\n    \n    const _gl = c.getContext(\"webgl\")\n    if (!_gl) {\n        alert(\"ERROR: WebGL API is not available\")\n        return\n    }\n    \n    gl = _gl as WebGLRenderingContext\n    glInit(width, height)\n    \n    const vs = `\n    attribute vec2 xy; \n    varying float r;\n    void main(void) { \n        gl_Position = vec4(xy, 0.0, 1.0);\n        r = sqrt(max(1.0 - dot(xy, xy), 0.0));\n    }`\n    const fs = `precision mediump float;\n    varying float r;\n    void main(void) { \n        gl_FragColor = vec4(vec3(1.0, 1.0, 1.0) * r, 1.0); \n    }`\n    const _program = create_program(vs, fs)\n    if(!_program) {\n        console.log(\"ERROR: failed to create a program.\")\n        return\n    }\n\n    const program = _program as WebGLProgram\n    const location = gl.getAttribLocation(program, \"xy\")\n    gl.enableVertexAttribArray(location)\n\n    const hexagon = getHexagon(16)\n    const _buff = getBuffers(gl, hexagon)\n    if(!_buff) {\n        console.log(\"ERROR: failed to create a buffer.\")\n        return\n    }\n    const buff = _buff as Buffers\n    \n    gl.bindBuffer(gl.ARRAY_BUFFER, buff.vbo)\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buff.ibo)\n    gl.vertexAttribPointer(location, 2, gl.FLOAT, false, 0, 0)\n\n    gl.drawElements(gl.TRIANGLES, hexagon.indices.flat().length, gl.UNSIGNED_SHORT, 0)\n    gl.flush()\n\n    console.log(\"DONE.\")\n}\n\n\nfunction glInit(width: number, height: number) {\n    gl.viewport(0, 0, width, height);\n    gl.clearColor(0.0, 0.0, 0.0, 1.0);\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n}\n\n\nfunction create_program(vs: string, fs: string): WebGLProgram | null {\n    const _program = gl.createProgram();\n    if (!_program) {\n        return null\n    }\n\n    const program = _program as WebGLProgram\n    gl.attachShader(program, create_shader(vs, gl.VERTEX_SHADER) as WebGLShader);\n    gl.attachShader(program, create_shader(fs, gl.FRAGMENT_SHADER) as WebGLShader);\n    gl.linkProgram(program);\n\n    if (gl.getProgramParameter(program, gl.LINK_STATUS)) {\n        gl.useProgram(program);\n        return program;\n    } else {\n        alert(gl.getProgramInfoLog(program));\n        return null;\n    }\n}\n\n\nfunction create_shader(code: string, shader_type: number): WebGLShader | null {\n    const _shader = gl.createShader(shader_type);\n    if(!_shader) {\n        return null\n    }\n\n    const shader = _shader as WebGLShader\n    gl.shaderSource(shader, code);\n    gl.compileShader(shader);\n\n    if (gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n        return shader;\n    } else {\n        alert(gl.getShaderInfoLog(shader));\n        return null;\n    }\n}"]}